<div class="login-box">
  <% if (cls === 'MNG' && categ==="UP") { %>
    <h2>관리자 화면 - 고객 정보 관리</h2>

    <form action="/admin/update_process" method="post">
      <input type="hidden" name="loginid" value="<%= list[0].loginid %>">

      <div class="form-group">
        <label>아이디(수정불가)</label>
        <input type="text" class="form-control large-input" value="<%= list[0].loginid %>" disabled>
      </div>

      <div class="form-group">
        <label>이름</label>
        <input type="text" name="name" class="form-control large-input" value="<%= list[0].name %>">
      </div>

      <div class="form-group">
        <label>생년월일</label>
        <input type="date" name="birth" class="form-control large-input" value="<%= list[0].birth.toISOString().substring(0, 10) %>">
      </div>

      <div class="form-group">
        <label>휴대전화</label>
        <input type="text" name="tel" class="form-control large-input" value="<%= list[0].tel %>">
      </div>

      <div class="form-group">
        <label>주소</label>
        <input type="text" name="address" class="form-control large-input" value="<%= list[0].address %>">
      </div>


        <div class="form-group">
        <label>클래스</label>
        <select id="class" name="class" required>
        <option value="" disabled>클래스를 선택해주세요.</option>
        <option value="CST" <%= list[0].class === 'CST' ? 'selected' : '' %>>고객</option>
        <option value="MNG" <%= list[0].class === 'MNG' ? 'selected' : '' %>>관리자</option>
        <option value="CEO" <%= list[0].class === 'CEO' ? 'selected' : '' %>>경영진</option>

</select>
 </div>

      <button type="submit" class="btn btn-primary big-login-btn">수정</button>
    </form>

  <% } else { %>
    <h2>프로필 수정</h2>

    <!-- 프로필 사진 표시 -->
    <div class="form-group">
      <label>프로필 사진</label><br>
      <img src="/images/<%= result[0].image || 'quest.png' %>" width="100px" height="100px" style="object-fit: cover; border-radius: 50%;">
    </div>

    <!-- 업로드 폼 -->
    <form action="/register/upload_process" method="post" enctype="multipart/form-data" style="margin-bottom: 20px;">
      <div class="filebox">
        <input class="upload-name" placeholder="첨부파일" readonly>
        <label for="file" class="btn-mini">파일찾기</label>
        <input type="file" id="file" name="uploadFile" onchange="displayFileName()" style="display: none;">
        <input type="submit" value="업로드" class="btn-mini">
        <a href='/register/delete_process' class="btn-mini2">기본 사진으로 변경</a>
      </div>
    </form>

    <div class="warning-text">
      <p>⚠︎ 파일찾기 버튼으로 원하는 파일을 선택 후 업로드 버튼을 눌러주세요. ⚠︎</p>
    </div>

    <!-- 정보 수정 폼 -->
    <form action="/register/profile_process" method="post">
      <input type="hidden" name="loginid" value="<%= result[0].loginid %>">

      <div class="form-group">
        <label>아이디(수정불가)</label>
        <input type="text" class="form-control large-input" value="<%= result[0].loginid %>" disabled>
      </div>

      <div class="form-group">
        <label>이름</label>
        <input type="text" name="name" class="form-control large-input" value="<%= result[0].name %>">
      </div>

      <div class="form-group">
        <label>생년월일</label>
        <input type="date" name="birth" class="form-control large-input" value="<%= result[0].birth.toISOString().substring(0, 10) %>">
      </div>

      <div class="form-group">
        <label>휴대전화</label>
        <input type="text" name="tel" class="form-control large-input" value="<%= result[0].tel %>">
      </div>

      <div class="form-group">
        <label>주소</label>
        <input type="text" name="address" class="form-control large-input" value="<%= result[0].address %>">
      </div>

      <button type="submit" class="btn btn-primary big-login-btn">수정</button>
    </form>
  <% } %>
</div>

<script>
function displayFileName() {
  const input = document.getElementById('file');
  const fileName = input.files.length > 0 ? input.files[0].name : '';
  document.querySelector('.upload-name').value = fileName;
}
</script>
